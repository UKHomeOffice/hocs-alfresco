version: '3.1'

services:

  database:
    image: mysql

    ports:
      - 3306:3306

    networks:
      - alf-network

    environment:
      MYSQL_ROOT_PASSWORD: alfresco
      MYSQL_DATABASE: alfresco
      MYSQL_USER: alfresco
      MYSQL_PASSWORD: alfresco

    restart: always

    volumes:
      - dbdata:/var/lib/mysql

  alfresco:
    build:
      context: .

    environment:
      ALF_S3_ACCESSKEY:
      ALF_S3_SECRETKEY:
      ALF_S3_BUCKETNAME:
      ALF_DB_USERNAME:
      ALF_DB_PASSWORD:
      ALF_DB_NAME:
      ALF_DB_HOST:

    depends_on:
      - database

    ports:
      - 9001:8080

    networks:
      - alf-network

networks:
  alf-network:

volumes:
  dbdata: {}